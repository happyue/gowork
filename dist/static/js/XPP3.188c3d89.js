(window.webpackJsonp=window.webpackJsonp||[]).push([["XPP3"],{XPP3:function(e,i,a){"use strict";a.r(i);var t=a("4d7F"),n=a.n(t),o=a("t3Un");var d={data:function(){return{dataObj:{token:"",key:""},dialogImageUrl:"",dialogImageName:"",dialogVisible:!1,image_uri:[],fileList:[]}},created:function(){this.getMedia()},methods:{getMedia:function(){var e=this;Object(o.a)({url:"/qiniu/getMediaInfo",method:"get"}).then(function(i){e.fileList=i.data})},addMedia:function(e){var i=this;!function(e,i){var a={uid:e,name:i};Object(o.a)({url:"/qiniu/addMediaInfo",method:"post",data:a})}(e.uid,e.uid+"_"+e.name),setTimeout(function(){i.getMedia()},300)},deleMedia:function(e){var i=this;!function(e,i){var a={uid:e,name:i};Object(o.a)({url:"/qiniu/deleMediaInfo",method:"post",data:a})}(e.uid,e.name),setTimeout(function(){i.getMedia()},200)},beforeUpload:function(e){var i=this;return new n.a(function(a,t){Object(o.a)({url:"/qiniu/upload/token",method:"get"}).then(function(t){var n=e.uid+"_"+e.name,o=t.data;i._data.dataObj.token=o,i._data.dataObj.key=n,a(!0)}).catch(function(e){console.log(e),t(!1)})})},handleSuccess:function(e,i,a){this.addMedia(i)},handleRemove:function(e,i){this.deleMedia(e)},handlePreview:function(e){this.dialogImageUrl=e.url,this.dialogImageName=e.name,this.dialogVisible=!0},beforeRemove:function(e,i){return this.$confirm("确定移除 "+e.name+"？")}}},l=a("KHd+"),u=Object(l.a)(d,function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("el-card",{staticStyle:{"margin-top":"20px","margin-left":"20px","margin-right":"20px"}},[a("el-upload",{attrs:{data:e.dataObj,multiple:!0,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"before-upload":e.beforeUpload,"before-remove":e.beforeRemove,"file-list":e.fileList,"list-type":"picture-card",action:"http://upload.qiniup.com/"}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(i){e.dialogVisible=i}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}}),e._v(" "),a("code",[e._v("Name: "+e._s(e.dialogImageName)),a("br"),e._v("URL: "+e._s(e.dialogImageUrl))])])],1)},[],!1,null,null,null);u.options.__file="upload.vue";i.default=u.exports}}]);